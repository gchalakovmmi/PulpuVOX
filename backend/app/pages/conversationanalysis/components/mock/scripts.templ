package mock

import ()

templ Scripts() {
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            fetch('/api/conversation/latest')
                .then(response => {
                    if (!response.ok) {
                        throw new Error('No conversation found');
                    }
                    return response.json();
                })
                .then(history => {
                    const container = document.getElementById('conversation-history');
                    container.innerHTML = ''; // Clear loading message
                    
                    history.forEach(turn => {
                        const div = document.createElement('div');
                        div.className = turn.role === 'user' ? 'user-message' : 'assistant-message';
                        div.innerHTML = `<strong>${turn.role}:</strong> ${turn.content}`;
                        container.appendChild(div);
                    });
                })
                .catch(error => {
                    console.error('Error fetching conversation:', error);
                    document.getElementById('conversation-history').textContent = 
                        'No conversation history found.';
                });
        });
    </script>
}
